---
title: 成功安装win7和ubuntu双系统
layout: post
categories:
  - 技术笔记
tags: [win7, ubuntu, 双系统, 分区]
---
上个学期做过的最有意义的事情之一是安装了ubuntu，让我见识了一个新的强大而自由的系统。由于当时懂得很少，安装ubuntu时就按默认设置安装了，后来才发现整个硬盘没有分区，系统文件、用户目录全都安装在一个盘上了，这是件非常糟糕的事情，因为一担重装系统我的/home目录下的所有文件都会消失。由于初学linux，所以也没有重新安装，就拿它练手了。用了ubuntu一个学期，渐渐的熟悉了没有windows的日子，而且深深的喜欢上了linux系统。

虽然windows可以做的事情在linux下也大多可以完成，而且可能做的更好，但是身边使用linux的人毕竟是少数，很多情况下还是要和windows打交道，于是这个学期初我就打算装个双系统。

第一次装双系统是用`wubi`装的。首先安装win7，把所有的硬盘空间都划分成windows的`NTFS`分区（当时不知道原来分区的格式还有那么多讲究，NTFS是windows特有的，不能在上面安装linux的）。然后下载`wubi`，`wubi`就像windows下的其他软件一样，安装卸载都非常简单，没有任何技术含量。按照提示很轻松得就安装好了ubuntu，安装好后重启时就会有启动系统的选项，windows7和ubuntu，选择ubuntu就进入了ubuntu系统。

但是`wubi`安装的ubuntu是安装在windows的`NTFS`分区里的（我当时把他安装在了`D：`盘），这注定我们的ubuntu是不能独立与windows系统而存在的，一担windows系统有个三长两短，ubuntu系统也无法启动了。这为我第二次安装双系统埋下了伏笔。

好景不长，一次灾难性的毁灭到来了。第一次安装的win7是用朋友烧制的U盘安装的，安装好后还需要激活。刚安装好系统的时候我没有立即激活，而是等了两天，在我用`wubi`安装好了“双系统”后才想起要激活win7来。于是下载了*WIN7 Activation v1.4*，按照提示运行了该软件，可是重启后屏幕就一直黑，连系统也进不了了。

幸好机器里没什么重要的资料，要不然还要折腾。在这次“惨痛”的教训之后，我决定不能再用`wubi`安装双系统了，一担windows崩溃ubuntu也进不了了，太危险。

第二次装双系统我请教了这方面比较懂行的同学并且找了很多这方面的资料，那时才知道原来看似简单的硬盘分区也有那么多讲究。由于手头上没有win7的光盘，我决定先安装ubuntu。放入ubuntu的cd（或烧制好的u盘），在选择硬盘分区的时候，我拿出200G空间划成“扩展分区”给ubuntu用（我是500G的硬盘），然后在扩展分区下划分了3个“逻辑分区”，一个2G给`/swap`，一个`60G`给`/`,剩下的全给了`/home`，如此以来我就不用担心重装系统时/home下的文件会丢失了。然后按照提示点鼠标就可以了。至此ubuntu安装完毕。也就是说我还有300G（但实际只剩下250多G）的空间没有用，它将留给windows7.

我自己上网下载了一个win7，然后用`ultraiso`工具将镜像烧制到u盘上。设置`bois`为usb优先启动，插入优盘，启动电脑，按照提示将剩下的250多G的空间划给了windows7，由于已经有一个扩展分区了，那么最多还能划3个主分区，一个系统保留分区，一个C盘，一个D盘。顺利安装好windows7后，重启。发现竟然开机时没有系统选项，系统直接进入了windows7……真是一波未平一波又起啊。

通过查找资料得知，安装windows时，windows会把`MBR`（硬盘主引导记录）重新改写。看来我们要修改MBR才行。还好，在ubuntu的[官方网站](https://help.ubuntu.com/community/WindowsDualBoot)上给出了解决办法。在*Installing Windows After Ubuntu*里有详细的说明，而且方法挺简单的，不用去学习什么`grub`语法，修改menu.list等等。

终于把双系统按好了，无比欣喜，特撰此文：）

